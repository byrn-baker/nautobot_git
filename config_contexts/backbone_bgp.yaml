_metadata:
  name: backbone_bgp
  weight: 1000
  description: Backbone BGP Config
  is_active: true
  tags:
    - slug: backbone_bgp
bgp:
  ibgp:
    l_asn: 65000
    neighbor_groups:
      - name: BB_FULL_MESH_GROUP
        description: "Backbone Full Mesh"
        rp_in: PASS-ALL
        rp_out: BB-ZONE
        peers:
          - name: 172.31.224.1
            description: MDC_BBR01
          - name: 172.31.224.2
            description: CITY_HALL_BBR01
          - name: 172.31.224.3
            description: CITY_HALL_BBR02
          - name: 172.31.224.4
            description: RAMPART_BBR01
          - name: 172.31.224.5
            description: PD_STA_BBR01
          - name: 172.31.224.6
            description: OLYMPIC_BBR01
          - name: 172.31.224.7
            description: HOLLYWOOD_BBR01
          - name: 172.31.224.8
            description: WILSHIRE_BBR01
          - name: 172.31.224.9
            description: PACIFIC_BBR01
          - name: 172.31.224.10
            description: WEST_LA_BBR01
          - name: 172.31.224.11
            description: VAN_NUYS_BBR01
          - name: 172.31.224.12
            description: VAN_NUYS_BBR02
          - name: 172.31.224.13
            description: VTD_BBR01
          - name: 172.31.224.14
            description: WEST_VALLEY_BBR01
          - name: 172.31.224.15
            description: TOPANGA_BBR01
          - name: 172.31.224.16
            description: VDC_BBR01
          - name: 172.31.224.17
            description: DEVONSHIRE_BBR01
          - name: 172.31.224.18
            description: MISSION_BBR01
          - name: 172.31.224.19
            description: FOOTHILL_BBR01
          - name: 172.31.224.20
            description: NORTH_HOLLYWOOD_BBR01
          - name: 172.31.224.21
            description: NORTHEAST_BBR01
          - name: 172.31.224.22
            description: CENTRAL_BBR01
          - name: 172.31.224.23
            description: NEWTON_BBR01
          - name: 172.31.224.24
            description: SOUTHWEST_BBR01
          - name: 172.31.224.25
            description: 77TH_ST_BBR01
          - name: 172.31.224.26
            description: SOUTHEAST_BBR01
          - name: 172.31.224.27
            description: HARBOR_BBR01
          - name: 172.31.224.28
            description: HOLLENBACK_BBR01
          - name: 172.31.224.29
            description: SAN_PEDRO
      - name: "PROVIDER_EDGE_GROUP"
        description: "Backbone Provider Edge"
        rp_in: PASS-ALL
        rp_out: BB-ZONE      
  vpnv4:
    neighbor_groups:
      - name: MPBGP_RR_GROUP
        description: "Fusion Router Group"
        rp_in: PASS-ALL
        rp_out: PASS-ALL
        peers:
          - name: 172.31.224.34
            description: CITY_HALL_RR
          - name: 172.31.224.35
            description: VAN_NUYS_RR
community_set:
  - name: TRANSIT
    set: "65000:3400"
  - name: SET-NEXT-HOP-SELF
    set: "65000:0"
route_policy:
  - name: BB-ZONE
    matches_every: SET-NEXT-HOP-SELF
    matches_any: TRANSIT
  - name: PASS-ALL